!function(e){"use strict";if(null==e)throw new Error("RLDL undefined.");var $=e._$,t=function(e,n,s){var r=void 0==s?{}:s;return $.each(e,function(s,a){var o=n;o=void 0==o?s:n+"["+s+"]",$.isPlainObject(e[s])?t(e[s],o,r):r[o]=a}),r},n=function(){var e=$.Deferred();return $(function(){var t=$("<iframe>");t.css({width:1,height:1,position:"absolute",bottom:0,right:0,opacity:0}),$("body").append(t),t.load(function(){e.resolve()}),t.attr("src","https://login.rldl.net/blank")}),e}(),s=function(r){return null!=s._singletonInstance?s._singletonInstance:(this.api="string"==typeof r?r:e._api,this.locale=null,this.call=function(s,r,a,o){var i=$.Deferred();s.toUpperCase(),$.isPlainObject(a)||(a={}),r=this.formatUrl(r);var l=e._config.get("locale");null!=l&&l!=this.locale&&(a.locale=this.locale=l);var c={url:r,dataType:"json",data:a,async:!0,crossDomain:!0,xhrFields:{withCredentials:!0}};switch(s){case"PUT":a.REQUEST_METHOD=s,s="POST";case"POST":if($.isPlainObject(o)&&window.FormData){var u=new FormData;$.each(t(a),function(e,t){u.append(e,t)}),$.each(o,function(e,t){"object"==typeof t&&1==t.length?u.append(e,t[0].files[0]):u.append(e,t)}),$.extend(c,{data:u,cache:!1,processData:!1,contentType:!1})}break;case"DELETE":a.REQUEST_METHOD=s,s="POST";break;default:a.REQUEST_METHOD=s,s="POST"}return c.type=s,n.done(function(){}),$.ajax(c).done(function(e){i.resolve(e)}).fail(function(e){e.hasOwnProperty("status")&&0!=e.status&&null!=e.status&&void 0!=e.status||(e.status=503,e.statusText="Internet disconnected.");var t={code:e.status,message:null};e.hasOwnProperty("responseJSON")&&e.responseJSON.hasOwnProperty("error")&&(e.responseJSON.error.hasOwnProperty("code")&&(t.code=e.responseJSON.error.code),e.responseJSON.error.hasOwnProperty("message_i18n")?t.message=e.responseJSON.error.message_i18n:e.responseJSON.error.hasOwnProperty("message")&&(t.message=e.responseJSON.error.message)),null==t.message&&e.hasOwnProperty("statusText")&&(t.message=e.statusText),i.reject(t)}),i},this.get=function(e,t){return this.call("GET",e,t)},this.put=function(e,t,n){return $.isPlainObject(n)?this.upload("PUT",e,t,n):this.call("PUT",e,t,n)},this.delete=function(e,t){return this.call("DELETE",e,t)},this.post=function(e,t,n){return $.isPlainObject(n)?this.upload("POST",e,t,n):this.call("POST",e,t,n)},this.upload=function(e,t,n,s){var r=$.Deferred();t=this.formatUrl(t);var a=this;return this.call("GET","upload",{url:a.formatUrl(t)}).done(function(t){t.hasOwnProperty("upload_url")?a.call(e,t.upload_url,n,s).done(function(e){r.resolve(e)}).fail(function(e){r.reject(e)}):r.reject({code:n.status,message:null})}).fail(function(e){r.reject(e)}),r},this.formatUrl=function(e){var t=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return t.test(e)||(e=this.api+"/"+e),e},s._singletonInstance=this,this)};s._singletonInstance=null,s.getInstance=function(){return null==this._singletonInstance&&(this._singletonInstance=new s),this._singletonInstance},e.Api=s}("object"==typeof RLDL?RLDL:null);